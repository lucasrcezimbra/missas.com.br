<!DOCTYPE html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8">
        {% if parish %}
            <title>{{ parish.name }} - {{ parish.city.name }}/{{ parish.city.state.short_name.upper }} - Missas.com.br</title>
        {% elif city %}
            <title>Horários de missas e confissões em {{ city.name }}/{{ city.state.short_name.upper }}</title>
        {% elif state %}
            <title>Horários de missas e confissões no {{ state.name }}</title>
        {% else %}
            <title>Missas.com.br - Horários de missas e confissões no Brasil</title>
        {% endif %}
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description"
              content="Plataforma que fornece informações sobre horários de missas e confissões em várias paróquias do Brasil, permitindo o filtro por dia e horários.">
        <meta name="keywords"
              content="missas, confissões, horários, paróquias, Brasil">
        <meta name="author" content="Lucas Rangel Cezimbra">
        {% load django_htmx static %}
        {% htmx_script %}
        <link href="{% static 'bootstrap.min.css' %}" rel="stylesheet" async>
        <link rel="apple-touch-icon"
              sizes="180x180"
              href="{% static 'apple-touch-icon.png' %}">
        <link rel="icon"
              type="image/png"
              sizes="32x32"
              href="{% static 'favicon-32x32.png' %}">
        <link rel="icon"
              type="image/png"
              sizes="16x16"
              href="{% static 'favicon-16x16.png' %}">
        <link rel="manifest" href="{% static 'site.webmanifest' %}">
        <link href="{% static 'fontawesomefree/css/fontawesome.css' %}"
              rel="stylesheet"
              type="text/css"
              async>
        <link href="{% static 'fontawesomefree/css/solid.css' %}"
              rel="stylesheet"
              type="text/css"
              async>
        <link href="{% static 'fontawesomefree/css/brands.css' %}"
              rel="stylesheet"
              type="text/css"
              async>
        <link href="{% static 'main.css' %}" rel="stylesheet" type="text/css">
        <meta name="htmx-config" content='{"getCacheBusterParam":true}'>
        <style>
            {% block style %}{% endblock %}
        </style>
    </head>
    <body hx-boost="true" hx-indicator="#global-loading-indicator">
        <!-- Global Loading Indicator -->
        <div id="global-loading-indicator" class="htmx-indicator">
            <div class="loading-spinner"></div>
            <div class="loading-text">Carregando...</div>
        </div>
        <div class="container">
            <div class="row mb-4 align-items-center">
                <div class="col-2 col-lg-1">
                    <div class="logo-container">
                        <img src="{% static 'logo.webp' %}"
                             alt="Logo Missas.com.br"
                             loading="lazy">
                    </div>
                </div>
                <div class="col-7 col-md-6 col-lg-7">
                    <h1>Missas.com.br</h1>
                </div>
                <div class="col-sm-12 col-md-4 col-lg-4 text-end">
                    <button type="button"
                            class="btn btn-primary"
                            data-bs-toggle="modal"
                            data-bs-target="#addParishModal">
                        <i class="fa-solid fa-plus"></i> Adicione uma paróquia
                    </button>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    {% if parish or city or state %}
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item">
                                    <a href="/">Início</a>
                                </li>
                                {% if parish %}
                                    <li class="breadcrumb-item">
                                        <a href="/{{ parish.city.state.slug }}">{{ parish.city.state.name }}</a>
                                    </li>
                                    <li class="breadcrumb-item">
                                        <a href="/{{ parish.city.state.slug }}/{{ parish.city.slug }}/">{{ parish.city.name }}</a>
                                    </li>
                                    <li class="breadcrumb-item active" aria-current="page">{{ parish.name }}</li>
                                {% elif city %}
                                    <li class="breadcrumb-item">
                                        <a href="/{{ city.state.slug }}">{{ city.state.name }}</a>
                                    </li>
                                    <li class="breadcrumb-item active" aria-current="page">{{ city.name }}</li>
                                {% elif state %}
                                    <li class="breadcrumb-item active" aria-current="page">{{ state.name }}</li>
                                {% endif %}
                            </ol>
                        </nav>
                    {% endif %}
                </div>
            </div>
            <div id="content">

                {% block content %}{% endblock %}

            </div>
        </div>
        <footer>
            <a href="/">
                <i class="fa-solid fa-home"></i> Início
            </a>
            <span class="separator">|</span>
            <a href="https://github.com/lucasrcezimbra/missas.com.br"
               target="_blank"
               rel="noopener noreferrer">
                <i class="fa-brands fa-github"></i> GitHub
            </a>
            <span class="separator">|</span>
            <a href="https://wa.me/+5584991234449"
               target="_blank"
               rel="noopener noreferrer">
                <i class="fa-brands fa-whatsapp"></i> Fale Conosco
            </a>
        </footer>
        <script src="{% static 'bootstrap.min.js' %}" defer></script>
        <script defer
                src='https://static.cloudflareinsights.com/beacon.min.js'
                data-cf-beacon='{"token": "b300d389869f4fac95d6c34ac8ea2d0d"}'></script>
        <script data-goatcounter="https://missas.goatcounter.com/count"
                async
                src="//gc.zgo.at/count.js"></script>
        <div class="modal fade"
             id="addParishModal"
             tabindex="-1"
             aria-labelledby="addParishModalLabel"
             aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="addParishModalLabel">Adicionar Paróquia</h5>
                        <button type="button"
                                class="btn-close"
                                data-bs-dismiss="modal"
                                aria-label="Close"></button>
                    </div>
                    <div class="modal-body" hx-target="this">
                        <p>Nos envie o contato da paróquia e nós fazemos o resto.</p>
                        <form id="addParishForm"
                              class="mt-3"
                              hx-post="{% url 'create_contact' %}"
                              hx-trigger="submit"
                              hx-indicator="#loading"
                              hx-swap="outerHTML">
                            <div id="formContent">
                                {% csrf_token %}
                                <div class="mb-3">
                                    <label class="form-label">WhatsApp da paróquia</label>
                                    <div class="input-group">
                                        <span class="input-group-text">
                                            <i class="fa-brands fa-whatsapp"></i>
                                        </span>
                                        <input type="tel"
                                               class="form-control ddd-input"
                                               id="ddd"
                                               name="ddd"
                                               placeholder="DDD"
                                               pattern="[0-9]{2}"
                                               maxlength="2"
                                               required>
                                        <input type="tel"
                                               class="form-control"
                                               id="number"
                                               name="number"
                                               placeholder="Número"
                                               maxlength="11"
                                               required>
                                    </div>
                                    <div class="form-text">Digite o DDD e o número</div>
                                </div>
                                <div class="d-flex justify-content-end gap-2">
                                    <div id="loading" class="htmx-indicator">
                                        <div class="spinner-border spinner-border-sm text-primary" role="status">
                                            <span class="visually-hidden">Enviando...</span>
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fa-solid fa-paper-plane"></i> Enviar
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
