<!DOCTYPE html>
<html lang="pt-BR">
    <head>
        <script src="https://js.sentry-cdn.com/5236829dab2297fbde0c3a4557d0ef10.min.js"
                crossorigin="anonymous"></script>
        <meta charset="UTF-8">
        {% if parish %}
            <title>{{ parish.name }} - {{ parish.city.name }}/{{ parish.city.state.short_name.upper }} - Missas.com.br</title>
        {% elif city %}
            <title>Horários de missas e confissões em {{ city.name }}/{{ city.state.short_name.upper }}</title>
        {% elif state %}
            <title>Horários de missas e confissões no {{ state.name }}</title>
        {% else %}
            <title>Missas.com.br - Horários de missas e confissões no Brasil</title>
        {% endif %}
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description"
              content="Plataforma que fornece informações sobre horários de missas e confissões em várias paróquias do Brasil, permitindo o filtro por dia e horários.">
        <meta name="keywords"
              content="missas, confissões, horários, paróquias, Brasil">
        <meta name="author" content="Lucas Rangel Cezimbra">
        {% load django_htmx static %}
        {% htmx_script %}
        <!-- Critical CSS inlined to prevent FOUC -->
        <style>
            /* Critical CSS for immediate rendering */
            body {
                margin: 0;
                font-family: system-ui, -apple-system, sans-serif;
                line-height: 1.6;
                background-color: #E1F5FE;
            }
            .container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 1rem;
                background-color: white;
                border-radius: 20px;
                margin-top: 2rem;
                margin-bottom: 2rem;
            }
            h1 {
                color: #1E88E5;
                margin: 0;
                font-size: 2.5rem;
                font-weight: 700;
            }
            .btn {
                display: inline-block;
                padding: 0.375rem 0.75rem;
                margin-bottom: 0;
                font-size: 1rem;
                font-weight: 400;
                line-height: 1.5;
                text-align: center;
                white-space: nowrap;
                vertical-align: middle;
                cursor: pointer;
                border: 1px solid transparent;
                border-radius: 0.375rem;
                text-decoration: none;
            }
            .btn-primary {
                color: #fff;
                background-color: #0d6efd;
                border-color: #0d6efd;
            }
        </style>
        <link rel="stylesheet"
              href="{% static 'bootstrap.min.css' %}"
              media="print"
              onload="this.media='all'; this.onload=null;">
        <link rel="stylesheet"
              href="{% static 'fontawesomefree/css/fontawesome.min.css' %}"
              media="print"
              onload="this.media='all'; this.onload=null;">
        <link rel="stylesheet"
              href="{% static 'fontawesomefree/css/solid.min.css' %}"
              media="print"
              onload="this.media='all'; this.onload=null;">
        <link rel="stylesheet"
              href="{% static 'fontawesomefree/css/brands.min.css' %}"
              media="print"
              onload="this.media='all'; this.onload=null;">
        <link rel="apple-touch-icon"
              sizes="180x180"
              href="{% static 'apple-touch-icon.png' %}">
        <link rel="icon"
              type="image/png"
              sizes="32x32"
              href="{% static 'favicon-32x32.png' %}">
        <link rel="icon"
              type="image/png"
              sizes="16x16"
              href="{% static 'favicon-16x16.png' %}">
        <link rel="stylesheet"
              href="{% static 'styles.css' %}"
              media="print"
              onload="this.media='all'; this.onload=null;">
        <link rel="manifest" href="{% static 'site.webmanifest' %}">
        <meta name="htmx-config" content='{"getCacheBusterParam":true}'>
        <script>
          !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init Re Cs Fs Pe Rs Ms capture Ve calculateEventProperties Ds register register_once register_for_session unregister unregister_for_session zs getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSurveysLoaded onSessionId getSurveys getActiveMatchingSurveys renderSurvey canRenderSurvey canRenderSurveyAsync identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty js As createPersonProfile Ns Is Us opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing clear_opt_in_out_capturing Os debug I Ls getPageViewId captureTraceFeedback captureTraceMetric".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
          posthog.init('phc_D2o38Ed19YLVZLhRKvKU0Gj5B5dsDLXohBipBUOOlW4', {
              api_host: 'https://us.i.posthog.com',
              defaults: '2025-05-24',
              person_profiles: 'always',
          })
        </script>
        <style>
            {% block style %}{% endblock %}
        </style>
    </head>
    <body hx-boost="true" hx-indicator="#global-loading-indicator">
        <!-- Global Loading Indicator -->
        <div id="global-loading-indicator" class="htmx-indicator">
            <div class="loading-spinner"></div>
            <div class="loading-text">Carregando...</div>
        </div>
        <div class="container">
            <div class="row mb-4 align-items-center">
                <div class="col-2 col-lg-1">
                    <div class="logo-container">
                        <img src="{% static 'logo.webp' %}"
                             alt="Logo Missas.com.br"
                             loading="lazy">
                    </div>
                </div>
                <div class="col-7 col-md-6 col-lg-7">
                    <h1>Missas.com.br</h1>
                </div>
                <div class="col-sm-12 col-md-4 col-lg-4 text-end">
                    <button type="button"
                            class="btn btn-primary"
                            data-bs-toggle="modal"
                            data-bs-target="#addParishModal">
                        <i class="fa-solid fa-plus"></i> Adicione uma paróquia
                    </button>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    {% if parish or city or state %}
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item">
                                    <a href="/">Início</a>
                                </li>
                                {% if parish %}
                                    <li class="breadcrumb-item">
                                        <a href="/{{ parish.city.state.slug }}">{{ parish.city.state.name }}</a>
                                    </li>
                                    <li class="breadcrumb-item">
                                        <a href="/{{ parish.city.state.slug }}/{{ parish.city.slug }}/">{{ parish.city.name }}</a>
                                    </li>
                                    <li class="breadcrumb-item active" aria-current="page">{{ parish.name }}</li>
                                {% elif city %}
                                    <li class="breadcrumb-item">
                                        <a href="/{{ city.state.slug }}">{{ city.state.name }}</a>
                                    </li>
                                    <li class="breadcrumb-item active" aria-current="page">{{ city.name }}</li>
                                {% elif state %}
                                    <li class="breadcrumb-item active" aria-current="page">{{ state.name }}</li>
                                {% endif %}
                            </ol>
                        </nav>
                    {% endif %}
                </div>
            </div>
            <div id="content">

                {% block content %}{% endblock %}

            </div>
        </div>
        <footer>
            <a href="/">
                <i class="fa-solid fa-home"></i> Início
            </a>
            <span class="separator">|</span>
            <a href="https://github.com/lucasrcezimbra/missas.com.br"
               target="_blank"
               rel="noopener noreferrer">
                <i class="fa-brands fa-github"></i> GitHub
            </a>
            <span class="separator">|</span>
            <a href="https://wa.me/+5584991234449"
               target="_blank"
               rel="noopener noreferrer">
                <i class="fa-brands fa-whatsapp"></i> Fale Conosco
            </a>
        </footer>
        <script src="{% static 'bootstrap.min.js' %}" defer></script>
        <script defer
                src='https://static.cloudflareinsights.com/beacon.min.js'
                data-cf-beacon='{"token": "b300d389869f4fac95d6c34ac8ea2d0d"}'></script>
        <script data-goatcounter="https://missas.goatcounter.com/count"
                async
                src="//gc.zgo.at/count.js"></script>
        <div class="modal fade"
             id="addParishModal"
             tabindex="-1"
             aria-labelledby="addParishModalLabel"
             aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="addParishModalLabel">Adicionar Paróquia</h5>
                        <button type="button"
                                class="btn-close"
                                data-bs-dismiss="modal"
                                aria-label="Close"></button>
                    </div>
                    <div class="modal-body" hx-target="this">
                        <p>Nos envie o contato da paróquia e nós fazemos o resto.</p>
                        <form id="addParishForm"
                              class="mt-3"
                              hx-post="{% url 'create_contact' %}"
                              hx-trigger="submit"
                              hx-indicator="#loading"
                              hx-swap="outerHTML">
                            <div id="formContent">
                                {% csrf_token %}
                                <div class="mb-3">
                                    <label class="form-label">WhatsApp da paróquia</label>
                                    <div class="input-group">
                                        <span class="input-group-text">
                                            <i class="fa-brands fa-whatsapp"></i>
                                        </span>
                                        <input type="tel"
                                               class="form-control"
                                               id="ddd"
                                               name="ddd"
                                               placeholder="DDD"
                                               pattern="[0-9]{2}"
                                               maxlength="2"
                                               style="max-width: 80px"
                                               required>
                                        <input type="tel"
                                               class="form-control"
                                               id="number"
                                               name="number"
                                               placeholder="Número"
                                               maxlength="11"
                                               required>
                                    </div>
                                    <div class="form-text">Digite o DDD e o número</div>
                                </div>
                                <div class="d-flex justify-content-end gap-2">
                                    <div id="loading" class="htmx-indicator">
                                        <div class="spinner-border spinner-border-sm text-primary" role="status">
                                            <span class="visually-hidden">Enviando...</span>
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fa-solid fa-paper-plane"></i> Enviar
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
